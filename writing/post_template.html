<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Post | Kevin Cong</title>
    <link rel="stylesheet" href="/style.css" />
</head>

<body>
    <!-- ---------- HEADER ---------- -->
    <header>
        <div class="nav-container">
            <h1><a href="/">kevin cong</a></h1>
            <nav>
                <a href="/">About</a>
                <a href="/projects.html">Projects</a>
                <a href="/writing.html" class="active">Writing</a>
            </nav>
        </div>
    </header>

    <!-- ---------- MAIN CONTENT ---------- -->
    <main class="content">
        <div class="post-header">
            <div class="post-title-date">
                <h2 id="post-title">Loading...</h2>
                <span class="writing-date" id="post-date"></span>
            </div>
            <p class="detailed-description" id="post-desc"></p>
        </div>

        <div id="doc-content">Loading...</div>
    </main>

    <footer>
        <p>© 2025 Kevin Cong</p>
    </footer>

    <!-- ---------- SCRIPT ---------- -->
    <script>
        // Read parameters from URL
        const params = new URLSearchParams(window.location.search);
        const title = decodeURIComponent(params.get("title") || "");
        const date = decodeURIComponent(params.get("date") || "");
        const desc = decodeURIComponent(params.get("desc") || "");
        const doc = decodeURIComponent(params.get("doc") || "");
        const pdf = decodeURIComponent(params.get("pdf") || "");

        // Set title/date
        document.getElementById("post-title").innerText = title;
        document.getElementById("post-date").innerText = date;

        const container = document.getElementById("doc-content");

        // Add optional detailed description above content
        if (desc) {
            const descElem = document.createElement("p");
            descElem.className = "detailed-description";
            descElem.innerText = desc;
            document.querySelector("main").insertBefore(descElem, container);
        }

        // Render PDF or Google Doc
        if (pdf) {
            // Embed PDF directly
            container.innerHTML = `
        <iframe src="${pdf}" width="100%" height="800px" style="border:none;"></iframe>
        <p><a href="${pdf}" target="_blank">Open PDF in new tab ↗</a></p>
      `;
        } else if (doc) {
            // If it's a published Google Doc, embed it directly
            const embedURL = doc.includes("?") ? doc : doc + "?embedded=true";
            container.innerHTML = `
        <iframe src="${embedURL}" width="100%" height="800px" style="border:none;"></iframe>
        <p><a href="${doc}" target="_blank">Open full document ↗</a></p>
      `;
        } else {
            container.innerHTML = "<p>No document or PDF specified for this post.</p>";
        }
    </script>
</body>

</html>